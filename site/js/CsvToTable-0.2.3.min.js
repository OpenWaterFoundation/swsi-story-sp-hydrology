var config={columns:void 0,decimalPrecision:void 0,formatNumbers:!0,headersInFile:!0,headers:void 0,notFormatted:void 0};function CsvToTable(r,e,n,t){if(null==r&&null==e&&null==n){r="clusterize";var a=window.location.href;a=a.split("?");for(var o=0;o<a.length;o++){if((i=decodeURIComponent(a[o])).startsWith("csv=")){if("undefined"===(e=i.replace("csv=",""))||""===e)return void(document.getElementById(r).innerHTML="<h3>No CSV file entered</h3>")}else if(i.startsWith("config=")){var i;(i=i.replace("config=","")).startsWith("{")?n=JSON.parse(i):"undefined"!==n&&null!=n&&(n=readJson(n))}}if(null==e)return void(document.getElementById(r).innerHTML="<h3>No arguments entered.<br>Arguments must be passed via URL</h3>")}else"string"!=typeof n||n.startsWith("{")||(n=readJson(n));headersArea="headersArea"+t,headers="headers"+t,scrollArea="scrollArea"+t,contentArea="contentArea"+t,document.getElementById(r).innerHTML="<table id='"+headersArea+"'><thead><tr id='"+headers+"'></tr></thead></table><div id='"+scrollArea+"' class='clusterize-scroll scroll-area'><table><tbody id='"+contentArea+"' class='clusterize-content'><tr class='clusterize-no-data'><td>Loading dataâ€¦</td></tr></tbody></table></div>",readConfig(n),Papa.parse(e,{download:!0,header:config.headersInFile,dynamicTyping:!0,skipEmptyLines:!0,complete:function(e){loadDataFromPapa(e,t)},error:function(e){throw document.getElementById(r).innerHTML="<h3>CSV file not found or invalid</h3>",new Error}})}function readJson(e){var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),JSON.parse(r.responseText)}function readConfig(e){null!=e&&(null!=e.columns&&(config.columns=e.columns),null!=e.decimalPrecision&&(config.decimalPrecision=e.decimalPrecision),null!=e.formatNumbers&&(config.formatNumbers=e.formatNumbers),null!=e.headersInFile&&(config.headersInFile=e.headersInFile),Array.isArray(e.headers)&&(config.headers=e.headers),null!=e.notFormatted&&(config.notFormatted=e.notFormatted))}function loadDataFromPapa(e,r){var n=void 0;headers="headers"+r,config.headersInFile?null!=e.meta.fields&&(n=e.meta.fields):null!=config.headers&&(n=config.headers);var t="";if(null!=n){for(var a=0;a<n.length;a++)(null!=config.headers||null==config.columns||null!=config.columns&&-1!=config.columns.indexOf(n[a]))&&(t+="<th>"+n[a]+"</th>");document.getElementById(headers).innerHTML=t}loadClusterize(dataToHTMLTable(n,e.data),r)}function dataToHTMLTable(e,r){for(var n=[],t=0;t<r.length;t++){var a,o="<tr>";a=null==e||Array.isArray(r[t])?r[t].length:e.length;for(var i=0;i<a;i++){var d;d=null==headers||Array.isArray(r[t])?i:e[i],null!=config.columns&&-1==config.columns.indexOf(d)||("number"!=typeof r[t][d]||!config.formatNumbers||null!=config.notFormatted&&-1!=config.notFormatted.indexOf(d)?o+="<td>"+r[t][d]+"</td>":o+=formatNumber(r[t][d],d)+"</td>")}n.push(o+"</tr>")}return n}function formatNumber(e,r){null!=config.decimalPrecision&&null!=config.decimalPrecision[r]&&(e=e.toFixed(config.decimalPrecision[r]));var n=e.toString().split(".");return n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),"<td style='text-align: right;'>"+(e=n.join("."))}function loadClusterize(e,r){headersArea="headersArea"+r,headers="headers"+r,scrollArea="scrollArea"+r,contentArea="contentArea"+r;new Clusterize({rows:e,scrollId:scrollArea,contentId:contentArea,callbacks:{clusterChanged:function(){fitHeaderColumns(),setHeaderWidth(r),fitTbodyToHeaders(r)}}})}var fitHeaderColumns=function(){var n=[];return function(){var e=$("#"+contentArea).find("tr:not(.clusterize-extra-row):first"),r=[];e.children().each(function(){r.push($(this).width())}),r.toString()!=n.toString()&&($("#"+headersArea).find("tr").children().each(function(e){$(this).width(r[e])}),n=r)}}(),setHeaderWidth=function(e){headersArea="headersArea"+e,contentArea="contentArea"+e,$("#"+headersArea).width($("#"+contentArea).width())},setHeaderLeftMargin=function(e){$("#headersArea").css("margin-left",-e)};function fitTbodyToHeaders(e){headersArea="headersArea"+e,headers="headers"+e,scrollArea="scrollArea"+e,contentArea="contentArea"+e;var r=document.getElementById(headers),n=document.getElementById(contentArea),t=r.childNodes,a=n.childNodes[0].childNodes;0==a.length&&3<=n.childNodes.length&&(a=n.childNodes[2].childNodes);for(var o=0;o<t.length;o++)t[o].offsetWidth>a[o].offsetWidth&&(a[o].style.minWidth=t[o].offsetWidth.toString()+"px",a[o].style.maxWidth=t[o].offsetWidth.toString()+"px"),setHeaderWidth(e),fitHeaderColumns()}