var config={columns:void 0,decimalPrecision:void 0,formatNumbers:!0,headersInFile:!0,headers:void 0,notFormatted:void 0};function CsvToTable(e,t,n){document.getElementById(e).innerHTML="<table id='headersArea'><thead><tr id='headers'></tr></thead></table><div id='scrollArea' class='clusterize-scroll'><table><tbody id='contentArea' class='clusterize-content'><tr class='clusterize-no-data'><td>Loading dataâ€¦</td></tr></tbody></table></div>",readConfig(n),Papa.parse(t,{download:!0,header:config.headersInFile,dynamicTyping:!0,skipEmptyLines:!0,complete:function(e){loadDataFromPapa(e)},error:function(e){throw new Error}})}function readConfig(e){null!=e.columns&&(config.columns=e.columns),null!=e.decimalPrecision&&(config.decimalPrecision=e.decimalPrecision),null!=e.formatNumbers&&(config.formatNumbers=e.formatNumbers),null!=e.headersInFile&&(config.headersInFile=e.headersInFile),Array.isArray(e.headers)&&(config.headers=e.headers),null!=e.notFormatted&&(config.notFormatted=e.notFormatted)}function loadDataFromPapa(e){var t=void 0;config.headersInFile?null!=e.meta.fields&&(t=e.meta.fields):null!=config.headers&&(t=config.headers);var n="";if(null!=t){for(var r=0;r<t.length;r++)(null!=config.headers||null==config.columns||null!=config.columns&&-1!=config.columns.indexOf(t[r]))&&(n+="<th>"+t[r]+"</th>");document.getElementById("headers").innerHTML=n}loadClusterize(dataToHTMLTable(t,e.data))}function dataToHTMLTable(e,t){for(var n=[],r=0;r<t.length;r++){var o,i="<tr>";o=null==e||Array.isArray(t[r])?t[r].length:e.length;for(var a=0;a<o;a++){var d;d=null==headers||Array.isArray(t[r])?a:e[a],null!=config.columns&&-1==config.columns.indexOf(d)||("number"!=typeof t[r][d]||!config.formatNumbers||null!=config.notFormatted&&-1!=config.notFormatted.indexOf(d)?i+="<td>"+t[r][d]+"</td>":i+=formatNumber(t[r][d],d)+"</td>")}n.push(i+"</tr>")}return n}function formatNumber(e,t){null!=config.decimalPrecision&&null!=config.decimalPrecision[t]&&(e=e.toFixed(config.decimalPrecision[t]));var n=e.toString().split(".");return n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),"<td style='text-align: right;'>"+(e=n.join("."))}function loadClusterize(e){new Clusterize({rows:e,scrollId:"scrollArea",contentId:"contentArea",callbacks:{clusterChanged:function(){fitHeaderColumns(),setHeaderWidth(),fitTbodyToHeaders()}}})}var fitHeaderColumns=function(){var n=[];return function(){var e=$("#contentArea").find("tr:not(.clusterize-extra-row):first"),t=[];e.children().each(function(){t.push($(this).width())}),t.toString()!=n.toString()&&($("#headersArea").find("tr").children().each(function(e){$(this).width(t[e])}),n=t)}}(),setHeaderWidth=function(){$("#headersArea").width($("#contentArea").width())},setHeaderLeftMargin=function(e){$("#headersArea").css("margin-left",-e)};function fitTbodyToHeaders(){var e=document.getElementById("headers"),t=document.getElementById("contentArea"),n=e.childNodes,r=t.childNodes[0].childNodes;0==r.length&&3<=t.childNodes.length&&(r=t.childNodes[2].childNodes);for(var o=0;o<n.length;o++)n[o].offsetWidth>r[o].offsetWidth&&(r[o].style.minWidth=n[o].offsetWidth.toString()+"px",r[o].style.maxWidth=n[o].offsetWidth.toString()+"px"),setHeaderWidth(),fitHeaderColumns()}